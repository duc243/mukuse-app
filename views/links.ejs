<%- include("./common/header.ejs", {title: "Liste de links"}) %>
<div class="w-full h-5/6">
  <div class="flex flex-col min-h-[80%] justify-center items-center gap-8 mb-4">
    <div
      class="bg-blue-300 p-2 rounded-md hover:bg-blue-100 hover:text-sky-500 border-solid border-2 hover:border-sky-500"
    >
      <a href="/">Créer un nouveau raccourcis</a>
    </div>

    <ul
      class="grid bg-gray-100 px-8 w-full md:w-4/5 sm:max-w-[1000px] rounded-lg shadow-sm"
    >
      <% for (let link of links){ %> <% if(link.valid && link.slug == user.id) {
      %>
      <div
        class="flex flex-col items-center sm:flex-row gap-16 w-full border-solid border-b py-8"
      >
        <li class="grid justify-center sm:w-1/2 md:w-3/5 items-start">
          <div class="w-80 h-auto flex-wrap-reverse">
            <p>Lien d'origine:</p>
            <span class="text-gray-400">
              <p class="truncate"><%= link.originalLink %></p>
            </span>
          </div>
          <div class="flex flex-col w-80">
            <p>Lien court:</p>
            <a
              target="_blank"
              href="/<%= link.id %>"
              class="text-gray-400 hover:text-sky-300 hover:underline"
              ><%= link.shortLink %>
              <i class="fa fa-external-link" aria-hidden="true"></i
            ></a>
          </div>
        </li>
        <div class="flex h-full w-2/5 gap-4">
          <li class="h-full">
            <img src="<%= link.qrCode %>" alt="QR Code" />
          </li>
          <div class="flex flex-col justify-center gap-2">
            <button
              class="bg-blue-300 p-2 rounded-md hover:bg-blue-100 hover:text-sky-500 border-solid border-2 hover:border-sky-500"
              type="button"
              id="downloadBtn"
              data-url="<%= link.qrCode %>"
            >
              Télécharger
            </button>
            <button
              id="deleteButton"
              data-id="<%= link.id %>"
              class="p-2 text-red-300 border-solid border rounded-lg border-transparent hover:border-red-300"
              type="submit"
            >
              Supprimer
            </button>
          </div>
        </div>
      </div>
      <% } %> <% } %>
    </ul>
  </div>
  <%- include("./common/footer.ejs") %>
  <script src="/js/deleteLink.js"></script>
  <script src="/js/downloadImage.js"></script>
</div>
